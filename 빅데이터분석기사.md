# 제1 유형

### Pandas 기본

import pandas as pd

df = pd.read_csv("/file/path.csv")
Ans = df.head(5)
df.shape
df.info()

df[ 조건식 or 컬럼 ]

.iloc[row][column]
.loc[]

.sum() <- 총합
.cumsum() <- 누적합
.value_counts() <- 총 개수

.mean() <- 평균
.median() <- 중앙값
.var() <- 분산
.std() <- 표준편차
.max() <- 최댓값
.min() <- 최솟값
.mode()[n] <- n번째 최빈값

.skew() <- 왜도
.kurt() <- 첨도 

### 데이터 삭제 및 대체
.drop([column], axis=1) <- 컬럼 삭제
.dropna(subset=['column']) <- 결측치 삭제 (subset에 지정한 column에 결측값이 있으면 행 삭제)
.fillna(value) <- 결측치 채우기
.fillna(method = 'bfill (다음값)' / 'pad (이전값)')

.replace('value1', 'value2') <- value1 을 value2 로 변경 

예시 -> df['f1'] = df['f1'].fillna(df['city'].map({'서울':s,'경기':k,'부산':b,'대구':d}))

.unique() <- 고유값

### 이상치 탐색 (IQR)

df.isnull().sum()  <- 각 칼럼의 결측값 개수 확인

Q1 = df['column'].quantile(0.25)  <- 특정 컬럼의 사분위수 확인

IQR = Q3 - Q1
Min = Q1 - 1.5*IQR
Max = Q3 + 1.5*IQR

out1 = df[df['Fare'] < Min]
out2 = df[df['Fare'] > Max]
outlier = pd.concat([out1, out2])

m_ceil = np.ceil(df['age'])  <- 올림
m_floor = np.floor(df['age'])  <- 내림
m_trunc = np.trunc(df['age'])  <- 버림

df.isnull().sum()/df.shape[0] <- 결측치 비율

np.log1p(df[column]) <- 컬럼 로그변환 

### 그룹화
df.groupby(['column1', 'column2']) <- 각 컬럼 별로 그룹화

### 정규화
from sklearn.preprocessing import StandardScaler, power_transform, MinMaxScaler

scaler - StandardScaler() <- Z-score 정규화 (표준화)
scaler = MinMaxScaler() <- min-max 스케일 변환

df[column] = scaler.fit_transform(df[[column]])

df[column] = power_transform(df[[column]]) <- yeo-johnson 변환
df[column] = power_transform(df[[column]], method='box-cox) <- box-cox 변환 

scaler = MinMaxScaler()

### 정렬
df.sort_values(column, ascending = False) <- 내림차순 정렬 

df.reset_index(drop=True) <- dataframe 전환 (기존 인덱스 제거 후 0부터 다시 인덱스 부여)

### 상관관계
.corr()

### 시계열 데이터
pd.to_datetime(df['Date']) <- object type을 datetime64 type으로 변경
df['year'] = df['Date'].dt.year
df['month'] = df['Date'].dt.month
df['day'] = df['Date'].dt.day

df['dayofweek'] = df['Date'].dt.dayofweek
df['weekend'] = df['dayofweek'].apply(lambda x: x>=5)

df = df.apply(lambda x: event_sales(x), axis=1)  <- axis = 0 (열 단위) / axis = 1 (행 단위)

df_w = df.resample('W').sum() <- 주 단위로 샘플링 (W : 주 단위 / 2W : 2주 단위 / M : 월 단위)

### 데이터 병합
b1 = pd.read_csv("../input/bigdatacertificationkr/basic1.csv")
b3 = pd.read_csv("../input/bigdatacertificationkr/basic3.csv")
df = pd.merge(left = b1 , right = b3, how = "left", on = "f4")

### 구간 분할
pd.qcut(df['age'], q=3)
df['range'] = pd.qcut(df['age'], q=3, labels=['group1','group2','group3'])

### 중복 제거
.drop_duplicates(subset=['age'])

### 한 칸 앞으로
df['previous_PV'] = df['PV'].shift(1)
.shift(n) <- 값을 아래로 n칸 이동 시킴 (n이 음수라면 위로 이동) 이때 몇몇 칸은 결측치가 생성됨

### 문자열
.str[] <- 인덱스 슬라이싱 방법 
.contains() <- 문자열 포함 확인


